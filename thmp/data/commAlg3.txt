\begin{lemma}
\label{lemma-homomorphism-limit}
Let $(M_i, \mu_{ij})$, $(N_i, \nu_{ij})$ be
systems of $R$-modules over the same partially ordered set.
A morphism of systems $\Phi = (\phi_i)$ from $(M_i, \mu_{ij})$ to
$(N_i, \nu_{ij})$ induces a unique homomorphism
$$
\colim \phi_i : \colim M_i \longrightarrow \colim N_i
$$
such that
$$
\xymatrix{
M_i \ar[r] \ar[d]_{\phi_i} & \colim M_i \ar[d]^{\colim \phi_i} \\
N_i \ar[r] & \colim N_i
}
$$
commutes for all $i \in I$.
\end{lemma}

\begin{proof}
Write $M = \colim M_i$ and $N = \colim N_i$ and $\phi = \colim \phi_i$
(as yet to be constructed). We will use the explicit description of $M$
and $N$ in Lemma \ref{lemma-colimit} without further mention.
The condition of the lemma is equivalent to the condition that
$$
\xymatrix{
\bigoplus_{i\in I} M_i \ar[r] \ar[d]_{\bigoplus\phi_i} & M \ar[d]^\phi \\
\bigoplus_{i\in I} N_i \ar[r] & N
}
$$
commutes. Hence it is clear that if $\phi$ exists, then it is unique.
To see that $\phi$ exists, it suffices to show that the kernel of the
upper horizontal arrow is mapped by $\bigoplus \phi_i$ to the kernel
of the lower horizontal arrow. To see this, let $j \leq k$ and
$x_j \in M_j$. Then
$$
(\bigoplus \phi_i)(x_j - \mu_{jk}(x_j))
=
\phi_j(x_j) - \phi_k(\mu_{jk}(x_j))
=
\phi_j(x_j) - \nu_{jk}(\phi_j(x_j))
$$
which is in the kernel of the lower horizontal arrow as required.
\end{proof}

\begin{lemma}
\label{lemma-directed-colimit-exact}
\begin{slogan}
Filtered colimits are exact.
\end{slogan}
Let $I$ be a directed partially ordered set.
Let $(L_i, \lambda_{ij})$, $(M_i, \mu_{ij})$, and
$(N_i, \nu_{ij})$ be systems of $R$-modules over $I$.
Let $\varphi_i : L_i \to M_i$ and $\psi_i : M_i \to N_i$ be
morphisms of systems over $I$. Assume that for all $i \in I$ the
sequence of $R$-modules
$$
\xymatrix{
L_i \ar[r]^{\varphi_i} &
M_i \ar[r]^{\psi_i} &
N_i
}
$$
is a complex with homology $H_i$.
Then the $R$-modules $H_i$ form a system over $I$,
the sequence of $R$-modules
$$
\xymatrix{
\colim_i L_i \ar[r]^\varphi &
\colim_i M_i \ar[r]^\psi &
\colim_i N_i
}
$$
is a complex as well, and denoting $H$ its homology we have
$$
H = \colim_i H_i.
$$
\end{lemma}

\begin{proof}
It is clear that
$
\xymatrix{
\colim_i L_i \ar[r]^\varphi &
\colim_i M_i \ar[r]^\psi &
\colim_i N_i
}
$
is a complex. For each $i \in I$, there is a canonical
$R$-module morphism $H_i \to H$ (sending each
$[m] \in H_i = \Ker(\psi_i) / \Im(\varphi_i)$ to the
residue class in $H = \Ker(\psi) / \Im(\varphi)$
of the image of $m$ in $\colim_i M_i$). These give rise
to a morphism $\colim_i H_i \to H$. It remains to
show that this morphism is surjective and injective.

\medskip\noindent
We are going to repeatedly use the description of colimits over $I$
as in Lemma \ref{lemma-directed-colimit} without further mention.
Let $h \in H$.
Since $H = \Ker(\psi)/\Im(\varphi)$ we see that
$h$ is the class mod $\Im(\varphi)$ of an element $[m]$
in $\Ker(\psi) \subset \colim_i M_i$. Choose an
$i$ such that $[m]$ comes from an element $m \in M_i$. Choose
a $j \geq i$ such that $\nu_{ij}(\psi_i(m)) = 0$ which is possible
since $[m] \in \Ker(\psi)$. After replacing $i$ by $j$ and
$m$ by $\mu_{ij}(m)$ we see that we may assume $m \in \Ker(\psi_i)$.
This shows that the map $\colim_i H_i \to H$ is surjective.

\medskip\noindent
Suppose that $h_i \in H_i$ has image zero on $H$. Since
$H_i = \Ker(\psi_i)/\Im(\varphi_i)$ we may represent
$h_i$ by an element $m \in \Ker(\psi_i) \subset M_i$.
The assumption on the vanishing of $h_i$ in $H$ means that
the class of $m$ in $\colim_i M_i$ lies in the image
of $\varphi$. Hence there exists a $j \geq i$ and an $l \in L_j$
such that $\varphi_j(l) = \mu_{ij}(m)$. Clearly this shows that
the image of $h_i$ in $H_j$ is zero. This proves the
injectivity of $\colim_i H_i \to H$.
\end{proof}

\begin{example}
\label{example-colimit-not-exact}
Taking colimits is not exact in general.
Consider the partially ordered set $I = \{a, b, c\}$ with
$a < b$ and $a < c$ and no other strict inequalities,
as in Example \ref{example-zero-colimit-different}.
Consider the map of systems
$(0, \mathbf{Z}, \mathbf{Z}, 0, 0) \to
(\mathbf{Z}, \mathbf{Z}, \mathbf{Z}, 1, 1)$.
From the description of the colimit in
Example \ref{example-zero-colimit-different}
we see that the associated map of colimits is not injective,
even though the map of systems is injective on each object.
Hence the result of Lemma \ref{lemma-directed-colimit-exact}
is false for general systems.
\end{example}

\begin{lemma}
\label{lemma-almost-directed-colimit-exact}
Let $\mathcal{I}$ be an index category satisfying the assumptions of
Categories, Lemma \ref{categories-lemma-split-into-directed}.
Then taking colimits of diagrams of abelian groups over $\mathcal{I}$
is exact (i.e., the analogue of
Lemma \ref{lemma-directed-colimit-exact}
holds in this situation).
\end{lemma}

\begin{proof}
By
Categories, Lemma \ref{categories-lemma-split-into-directed}
we may write $\mathcal{I} = \coprod_{j \in J} \mathcal{I}_j$ with each
$\mathcal{I}_j$ a filtered category, and $J$ possibly empty. By
Categories, Lemma \ref{categories-lemma-directed-category-system}
taking colimits over the index categories $\mathcal{I}_j$ is
the same as taking the colimit over some directed partially ordered
set. Hence
Lemma \ref{lemma-directed-colimit-exact}
applies to these colimits. This reduces the problem to showing that
coproducts in the category of $R$-modules over the set $J$ are exact.
In other words, exact sequences
$L_j \to M_j \to N_j$ of $R$ modules we have to show that
$$
\bigoplus\nolimits_{j \in J} L_j
\longrightarrow
\bigoplus\nolimits_{j \in J} M_j
\longrightarrow
\bigoplus\nolimits_{j \in J} N_j
$$
is exact. This can be verified by hand, and holds even if $J$ is empty.
\end{proof}

\noindent
For purposes of reference, we define what it means to have a relation
between elements of a module.

\begin{definition}
\label{definition-relation}
Let $R$ be a ring. Let $M$ be an $R$-module.
Let $n \geq 0$ and $x_i \in M$ for $i = 1, \ldots, n$.
A {\it relation} between $x_1, \ldots, x_n$ in $M$ is a
sequence of elements $f_1, \ldots, f_n \in R$ such that
$\sum_{i = 1, \ldots, n} f_i x_i = 0$.
\end{definition}

\begin{lemma}
\label{lemma-module-colimit-fp}
Let $R$ be a ring and let $M$ be an $R$-module.
Then $M$ is the colimit of a directed system
$(M_i, \mu_{ij})$ of $R$-modules
with all $M_i$ finitely presented $R$-modules.
\end{lemma}

\begin{proof}
Consider any finite subset $S \subset M$ and any finite
collection of relations $E$ among the elements
of $S$. So each $s \in S$ corresponds to $x_s \in M$ and
each $e \in E$ consists of a vector
of elements $f_{e, s} \in R$ such that $\sum f_{e, s} x_s = 0$.
Let $M_{S, E}$ be the cokernel of the map
$$
R^{\# E} \longrightarrow R^{\# S}, \quad
(g_e)_{e\in E} \longmapsto (\sum g_e f_{e, s})_{s\in S}.
$$
There are canonical maps $M_{S, E} \to M$.
If $S \subset S'$ and if the elements of
$E$ correspond, via this map, to relations
in $E'$, then there is an obvious map
$M_{S, E} \to M_{S', E'}$ commuting with the
maps to $M$. Let $I$ be the set of pairs
$(S, E)$ with ordering by inclusion as above.
It is clear that the colimit of this directed system is $M$.
\end{proof}






\section{Localization}
\label{section-localization}

\begin{definition}
\label{definition-multiplicative-subset}
Let $R$ be a ring, $S$ a subset of $R$.
We say $S$ is a {\it multiplicative subset of $R$} is
$1\in S$ and $S$ is closed
under multiplication, i.e., $s, s' \in S \Rightarrow ss' \in S$.
\end{definition}

\noindent
Given a ring $A$ and a multiplicative subset $S$, we
define a relation on $A \times S$ as follows:
$$
(x, s) \sim (y, t)
\Leftrightarrow
\exists u \in S \text{ such that } (xt-ys)u = 0
$$
It is easily checked that this is an equivalence relation.
Let $x/s$ (or $\frac{x}{s}$) be the equivalence class of $(x, s)$ and
$S^{-1}A$ be the set of all equivalence classes. Define addition
and multiplication in $S^{-1}A$ as follows:
$$
x/s + y/t = (xt + ys)/st, \quad
x/s \cdot y/t = xy/st
$$
One can check that $S^{-1}A$ becomes a ring under these operations.

\begin{definition}
\label{definition-localization}
This ring is called the {\it localization of $A$ with respect to $S$}.
\end{definition}

\noindent
We have a natural ring map from $A$ to its localization $S^{-1}A$,
$$
A \longrightarrow S^{-1}A, \quad x \longmapsto x/1
$$
which is sometimes called the {\it localization map}. In general the
localization map is not injective, unless $S$ contains no zerodivisors.
For, if $x/1 = 0$, then there is a $u\in S$ such that $xu = 0$ in $A$ and
hence $x = 0$ since there are no zerodivisors in $S$.
The localization of a ring has the following universal property.

\begin{proposition}
\label{proposition-universal-property-localization}
Let $f : A \to B$ be a ring map that sends every element in $S$ to a unit
of $B$. Then there is a unique homomorphism $g : S^{-1}A \to B$ such
that the following diagram commutes.
$$
\xymatrix{
A \ar[rr]^{f} \ar[dr] & & B \\
& S^{-1}A \ar[ur]_g
}
$$
\end{proposition}

\begin{proof}
Existence. We define a map $g$ as follows. For $x/s\in S^{-1}A$, let
$g(x/s) = f(x)f(s)^{-1}\in B$. It is easily checked from the definition
that this is a well-defined ring map. And it is also clear that
this makes the diagram commutative.

\medskip\noindent
Uniqueness. We now show that if $g' : S^{-1}A \to B$
satisfies $g'(x/1) = f(x)$, then $g = g'$. Hence $f(s) = g'(s/1)$ for
$s \in S$ by the commutativity of the diagram. But then $g'(1/s)f(s) = 1$
in $B$, which implies that $g'(1/s) = f(s)^{-1}$ and hence
$g'(x/s) = g'(x/1)g'(1/s) = f(x)f(s)^{-1} = g(x/s)$.
\end{proof}

\begin{lemma}
\label{lemma-localization-zero}
The localization $S^{-1}A$ is the zero ring if and only if $0\in S$.
\end{lemma}

\begin{proof}
If $0\in S$, any pair $(a, s)\sim (0, 1)$ by definition.
If $0\not \in S$, then clearly $1/1 \neq 0/1$ in $S^{-1}A$.
\end{proof}

\begin{lemma}
\label{lemma-localization-and-modules}
Let $R$ be a ring. Let $S \subset R$ be a multiplicative subset.
The category of $S^{-1}R$-modules is equivalent to the category
of $R$-modules $N$ with the property that every $s \in S$ acts as
an automorphism on $N$.
\end{lemma}

\begin{proof}
The functor which defines the equivalence associates to an $S^{-1}R$-module
$M$ the same module but now viewed as an $R$-module via the localization
map $R \to S^{-1}R$. Conversely, if $N$ is an $R$-module, such that every
$s \in S$ acts via an automorphism $s_N$, then we can think of $N$ as an
$S^{-1}R$-module by letting $x/s$ act via $x_N  \circ s_N^{-1}$.
We omit the verification that these two functors are quasi-inverse to
each other.
\end{proof}

\noindent
The notion of localization of a ring can be generalized to the
localization of a module. Let $A$ be a ring, $S$ a multiplicative
subset of $A$ and $M$ an $A$-module. We define a relation on
$M \times S$ as follows
$$
(m, s) \sim (n, t)
\Leftrightarrow
\exists u\in S \text{ such that } (mt-ns)u = 0
$$
This is clearly an equivalence relation. Denote by $m/s$ (or
$\frac{m}{s}$) be the equivalence class of $(m, s)$ and $S^{-1}M$ be
the set of all equivalence classes. Define the addition and scalar
multiplication as follows
$$
m/s + n/t = (mt + ns)/st,\quad
m/s\cdot n/t = mn/st
$$
It is clear that this makes $S^{-1}M$ an $S^{-1}A$ module.

\begin{definition}
\label{definition-localization-module}
The $S^{-1}A$-module $S^{-1}M$ is called the {\it localization} of $M$ at $S$.
\end{definition}

\noindent
Note that there is an $A$-module map $M \to S^{-1}M$, $m \mapsto m/1$
which is sometimes
called the {\it localization map}. It satisfies the following universal
property.

\begin{lemma}
\label{lemma-universal-property-localization-module}
Let $R$ be a ring. Let $S \subset R$ a multiplicative subset. Let $M$, $N$
be $R$-modules. Assume all the elements of $S$ act as automorphisms on $N$.
Then the canonical map
$$
\Hom_R(S^{-1}M, N) \longrightarrow \Hom_R(M, N)
$$
induced by the localization map, is an isomorphism.
\end{lemma}

\begin{proof}
It is clear that the map is well-defined and R-linear.
Injectivity: Let $\alpha \in \Hom_R(S^{-1}M, N)$ and take an arbitrary
element $m/s \in S^{-1}M$. Then, since $s \cdot \alpha(m/s) = \alpha(m/1)$,
we have $ \alpha(m/s) =s^{-1}(\alpha (m/1))$, so $\alpha$ is completely
determined by what it does on the image of $M$ in $S^{-1}M$.
Surjectivity: Let $\beta : M \rightarrow N$ be a given R-linear map.
We need to show that it can be "extended" to $S^{-1}M$. Define a map of
sets
$$
M \times S \rightarrow N,\quad
(m,s) \mapsto s^{-1}(m)
$$
Clearly, this map respects the equivalence relation from above, so it
descends to a well-defined map $\alpha : S^{-1}M \rightarrow N$.
It remains to show that this map is $R$-linear, so take
$r, r^\prime \in R$ as well as $s, s^\prime \in S$ and
$m, m^\prime \in M$. Then
\begin{align*}
\alpha(r \cdot m/s + r^\prime \cdot m^\prime /s^\prime)
& = \alpha ((r \cdot s\prime \cdot m + r\prime \cdot s \cdot m^\prime)
/(ss^\prime)) \\
& =
(ss^\prime)^{-1}(\beta(r \cdot s\prime \cdot m +
r\prime \cdot s \cdot m^\prime) \\
& =
(ss^\prime)^{-1} (r \cdot s^\prime \beta (m) +
r^\prime \cdot s \beta (m^\prime) \\
& =
r \alpha (m/s) + r^\prime \alpha (m^\prime /s^\prime)
\end{align*}
and we win.
\end{proof}

\begin{example}
\label{example-localize-at-prime}
Let $A$ be a ring and let $M$ be an $A$-module.
Here are some important examples of localizations.
\begin{enumerate}
\item Given $\mathfrak p$ a prime ideal of $A$ consider
$S = A\setminus\mathfrak p$. It is
immediately checked that $S$ is a multiplicative set. In this case
we denote $A_\mathfrak p$ and $M_\mathfrak p$ the localization of
$A$ and $M$ with respect to $S$ respectively. These are
called the {\it localization of $A$, resp.\ $M$ at $\mathfrak p$}.
\item Let $f\in A$. Consider $S = \{1, f, f^2, \ldots\}$.
This is clearly a multiplicative subset of $A$.
In this case we denote $A_f$
(resp. $M_f$) the localization $S^{-1}A$ (resp. $S^{-1}M$).
This is called the {\it localization of $A$, resp.\ $M$ with
respect to $f$}.
Note that $A_f = 0$ if and only if $f$ is nilpotent in $A$.
\item Let $S = \{f \in A \mid f \text{ is not a zerodivisor in }A\}$.
This is a multiplicative subset of $A$. In this case the
ring $Q(A) = S^{-1}A$ is called either the
{\it total quotient ring}, or the {\it total ring of fractions}
of $A$.
\end{enumerate}
\end{example}

\begin{lemma}
\label{lemma-localization-colimit}
Let $R$ be a ring.
Let $S \subset R$ be a multiplicative subset.
Let $M$ be an $R$-module.
Then
$$
S^{-1}M = \colim_{f \in S} M_f
$$
where the partial ordering on $S$ is given by
$f \geq f' \Leftrightarrow f = f'f''$ for some $f'' \in R$
in which case the map $M_{f'} \to M_f$ is given
by $m/(f')^e \mapsto m(f'')^e/f^e$.
\end{lemma}

\begin{proof}
Omitted. Hint: Use the universal property of
Lemma \ref{lemma-universal-property-localization-module}.
\end{proof}

\noindent
In the following paragraph,
let $A$ denote a ring,
and $M, N$ denote modules over $A$.

\medskip\noindent
If $S$ and $S'$ are multiplicative sets of $A$, then it is
clear that
$$
SS' = \{ss' : s\in S, \ s'\in S'\}
$$
is also a multiplicative set of $A$. Then the following holds.

\begin{proposition}
\label{proposition-localize-twice}
Let $\overline{S}$ be the image of $S$ in $S'^{-1}A$, then
$(SS')^{-1}A$ is isomorphic to $\overline{S}^{-1}(S'^{-1}A)$.
\end{proposition}

\begin{proof}
The map sending $x\in A$ to $x/1\in (SS'^{-1})A$ induces a map
sending $x/s\in S'^{-1}A$ to $x/s \in (SS'^{-1})A$, by universal
property. The image of the elements in $\overline{S}$ are invertible
in $(SS'^{-1})A$. By the universal property we get a map
$f : \overline{S}^{-1}(S'^{-1}A) \to (SS'^{-1})A$ which maps
$(x/t')/(s/s')$ to $(x/t')\cdot(s/s')^{-1}$.

\medskip\noindent
On the other hand, the map from $A$ to $\overline{S}^{-1}(S'^{-1}A)$
sending $x\in A$ to $(x/1)/(1/1)$ also induces a map
$g : (SS'^{-1})A \to \overline{S}^{-1}(S'^{-1}A)$ which sends $x/ss'$
to $(x/s')/(s/1)$, by the universal property again. It is
immediately checked that $f$ and $g$ are inverse to each other,
hence they are both isomorphisms.
\end{proof}

\noindent
For the module $M$ we have

\begin{proposition}
\label{proposition-localize-twice-module}
View $S'^{-1}M$ as an $A$-module, then $S^{-1}(S'^{-1}M)$ is
isomorphic to $(SS')^{-1}M$.
\end{proposition}

\begin{proof}
Note that given a $A$-module M, we have not proved any
universal property for $S^{-1}M$. Hence we cannot reason
as in the preceding proof; we have to construct the isomorphism explicitly.

\medskip\noindent
We define the maps as follows
\begin{align*}
& f : S^{-1}(S'^{-1}M) \longrightarrow (SS')^{-1}M, \quad \frac{x/s'}{s}\mapsto
x/ss'\\
& g : (SS')^{-1}M \longrightarrow S^{-1}(S'^{-1}M), \quad x/t\mapsto
\frac{x/s'}{s}\ \text{for some }s\in S, s'\in S', \text{ and }
t = ss'
\end{align*}
We have to check that these homomorphisms are well-defined, that is,
independent the choice of the fraction. This is easily checked and it is also
straightforward to show that they are inverse to each other.
\end{proof}

\noindent
If $u : M \to N$ is an $A$ homomorphism, then the localization indeed
induces a well-defined $S^{-1}A$ homomorphism $S^{-1}u : S^{-1}M \to
S^{-1}N$ which sends $x/s$ to $u(x)/s$. It is immediately checked that
this construction is functorial, so that $S^{-1}$
is actually a functor from the category of $A$-modules to the
category of $S^{-1}A$-modules. Moreover this functor is exact,
as we show in the following proposition.

\begin{proposition}
\label{proposition-localization-exact}
\begin{slogan}
Localization is exact.
\end{slogan}
Let $L\xrightarrow{u} M\xrightarrow{v} N$ is an exact sequence
of $R$-modules. Then
$S^{-1}L \to S^{-1}M \to S^{-1}N$ is also exact.
\end{proposition}

\begin{proof}
First it is clear that $S^{-1}L \to S^{-1}M \to S^{-1}N$ is a complex
since localization is a functor. Next suppose that $x/s$ maps to zero
in $S^{-1}N$ for some $x/s \in S^{-1}M$. Then by definition there is a
$t\in S$ such that $v(xt) = v(x)t = 0$ in $M$, which means
$xt \in \Ker(v)$. By the exactness of $L \to M \to N$ we have
$xt = u(y)$ for some $y$ in $L$. Then $x/s$ is the image of $y/st$.
This proves the exactness.
\end{proof}

\begin{lemma}
\label{lemma-localize-quotient-modules}
Localization respects quotients, i.e. if $N$ is a submodule of
$M$, then $S^{-1}(M/N)\simeq (S^{-1}M)/(S^{-1}N)$.
\end{lemma}

\begin{proof}
From the exact sequence
$$
0 \longrightarrow N \longrightarrow M \longrightarrow M/N \longrightarrow 0
$$
we have
$$
0 \longrightarrow S^{-1}N \longrightarrow S^{-1}M
\longrightarrow S^{-1}(M/N) \longrightarrow 0
$$
The corollary then follows.
\end{proof}

\noindent
If, in the preceding Corollary, we take $N = I$ and $M = A$ for an ideal $I$ of
$A$, we see that $S^{-1}A/S^{-1}I \simeq S^{-1}(A/I)$ as $A$-modules. The next
proposition shows that they are isomorphic as rings.

\begin{proposition}
\label{proposition-localize-quotient}
Let $I$ be an ideal of $A$, $S$ a multiplicative set of $A$. Then
$S^{-1}I$ is an ideal of $S^{-1}A$ and $\overline{S}^{-1}(A/I)$ is
isomorphic to $S^{-1}A/S^{-1}I$, where $\overline{S}$ is
the image of $S$ in $A/I$.
\end{proposition}

\begin{proof}
The fact that $S^{-1}I$ is an ideal is clear since $I$ itself is an
ideal. Define
$$
f : S^{-1}A\longrightarrow \overline{S}^{-1}(A/I), \quad x/s\mapsto
\overline{x}/\overline{s}
$$
where $\overline{x}$ and $\overline{s}$ are the images of $x$ and
$s$ in $A/I$. We shall keep similar notations in this proof.
This map is well-defined by the universal property of
$S^{-1}A$, and $S^{-1}I$ is contained in the kernel of it,
therefore it induces a map
$$
\overline{f} : S^{-1}A/S^{-1}I \longrightarrow \overline{S}^{-1}(A/I), \quad
\overline{x/s}\mapsto \overline{x}/\overline{s}
$$

\medskip\noindent
On the other hand, the map $A \to S^{-1}A/S^{-1}I$ sending $x$ to
$\overline{x/1}$ induces a map $A/I \to S^{-1}A/S^{-1}I$ sending
$\overline{x}$ to $\overline{x/1}$. The image of $\overline{S}$ is
invertible in $S^{-1}A/S^{-1}I$, thus induces a map
$$
g : \overline{S}^{-1}(A/I) \longrightarrow S^{-1}A/S^{-1}I, \quad
\frac{\overline{x}}{\overline{s}}\mapsto \overline{x/s}
$$
by the universal property. It is then clear that $\overline{f}$ and $g$
are inverse to each other, hence are both isomorphisms.
\end{proof}

\noindent
We now consider how submodules behave in localization.

\begin{lemma}
\label{lemma-submodule-localization}
Any submodule $N'$ of $S^{-1}M$ is of the form $S^{-1}N$ for some
$N\subset M$. Indeed one can take $N$ to be the inverse image of
$N'$ in $M$.
\end{lemma}

\begin{proof}
Let $N$ be the inverse image of $N'$ in $M$. Then one can see that
$S^{-1}N\supset N'$. To show they are equal, take $x/s$ in
$S^{-1}N$, where $s\in S$ and $x\in N$. This yields that $x/1\in
N'$. Since $N'$ is an $S^{-1}R$-submodule we have
$x/s = x/1\cdot 1/s\in N'$. This finishes the proof.
\end{proof}

\noindent
Taking $M = A$ and $N = I$ an ideal of $A$, we have the following
corollary, which can be viewed as a converse of the first part of
Proposition \ref{proposition-localize-quotient}.

\begin{lemma}
\label{lemma-ideal-in-localization}
\begin{slogan}
Ideals in the localization of a ring are localizations of ideals.
\end{slogan}
Each ideal $I'$ of $S^{-1}A$ takes the form $S^{-1}I$, where one can
take $I$ to be the inverse image of $I'$ in $A$.
\end{lemma}

\begin{proof}
Immediate from Lemma \ref{lemma-submodule-localization}.
\end{proof}










\section{Internal Hom}
\label{section-hom}

\noindent
If $R$ is a ring, and $M$, $N$ are $R$-modules, then
$$
\Hom_R(M, N) = \{ \varphi : M \to N\}
$$
is the set of $R$-linear maps from $M$ to $N$. This set comes with
the structure of an abelian group by setting
$(\varphi + \psi)(m) = \varphi(m) + \psi(m)$, as usual.
In fact, $\Hom_R(M, N)$ is also an $R$-module via the rule
$(x \varphi)(m) = x \varphi(m) = \varphi(xm)$.

\medskip\noindent
Given maps $a : M \to M'$ and $b : N \to N'$ of $R$-modules, we can
pre-compose and post-compose homomorphisms by $a$ and $b$. This leads
to the following commutative diagram
$$
\xymatrix{
\Hom_R(M', N) \ar[d]_{- \circ a} \ar[r]_{b \circ -} &
\Hom_R(M', N') \ar[d]^{- \circ a} \\
\Hom_R(M, N) \ar[r]^{b \circ -} &
\Hom_R(M, N')
}
$$
In fact, the maps in this diagram are $R$-module maps.
Thus $\Hom_R$ defines an additive functor
$$
\text{Mod}_R^{opp} \times \text{Mod}_R \longrightarrow \text{Mod}_R, \quad
(M, N) \longmapsto \Hom_R(M, N)
$$

\begin{lemma}
\label{lemma-hom-exact}
Exactness and $\Hom_R$. Let $R$ be a ring.
\begin{enumerate}
\item Let $M_1 \to M_2 \to M_3 \to 0$ be a complex of $R$-modules.
Then $M_1 \to M_2 \to M_3 \to 0$ is exact if and only if
$0 \to \Hom_R(M_3, N) \to \Hom_R(M_2, N) \to \Hom_R(M_1, N)$
is exact for all $R$-modules $N$.
\item  Let $0 \to M_1 \to M_2 \to M_3$ be a complex of $R$-modules.
Then $0 \to M_1 \to M_2 \to M_3$ is exact if and only if
$0 \to \Hom_R(N, M_1) \to \Hom_R(N, M_2) \to \Hom_R(N, M_3)$
is exact for all $R$-modules $N$.
\end{enumerate}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-hom-from-finitely-presented}
Let $R$ be a ring. Let $M$ be a finitely presented $R$-module.
Let $N$ be an $R$-module.
\begin{enumerate}
\item For $f \in R$ we have
$\Hom_R(M, N)_f = \Hom_{R_f}(M_f, N_f) = \Hom_R(M_f, N_f)$,
\item for a multiplicative subset $S$ of $R$ we have
$$
S^{-1}\Hom_R(M, N) = \Hom_{S^{-1}R}(S^{-1}M, S^{-1}N) =
\Hom_R(S^{-1}M, S^{-1}N).
$$
\end{enumerate}
\end{lemma}

\begin{proof}
Part (1) is a special case of part (2).
The second equality in (2) follows from
Lemma \ref{lemma-universal-property-localization-module}.
Choose a presentation
$$
\bigoplus\nolimits_{j = 1, \ldots, m} R
\longrightarrow
\bigoplus\nolimits_{i = 1, \ldots, n} R
\to M \to 0.
$$
By
Lemma \ref{lemma-hom-exact}
this gives an exact sequence
$$
0 \to
\Hom_R(M, N) \to
\bigoplus\nolimits_{i = 1, \ldots, n} N
\longrightarrow
\bigoplus\nolimits_{j = 1, \ldots, m} N.
$$
Inverting $S$ and using Proposition \ref{proposition-localization-exact}
we get an exact sequence
$$
0 \to
S^{-1}\Hom_R(M, N) \to
\bigoplus\nolimits_{i = 1, \ldots, n} S^{-1}N
\longrightarrow
\bigoplus\nolimits_{j = 1, \ldots, m} S^{-1}N
$$
and the result follows since $S^{-1}M$ sits in
an exact sequence
$$
\bigoplus\nolimits_{j = 1, \ldots, m} S^{-1}R
\longrightarrow
\bigoplus\nolimits_{i = 1, \ldots, n} S^{-1}R \to S^{-1}M \to 0
$$
which induces (by Lemma \ref{lemma-hom-exact})
the exact sequence
$$
0 \to
\Hom_{S^{-1}R}(S^{-1}M, S^{-1}N) \to
\bigoplus\nolimits_{i = 1, \ldots, n} S^{-1}N
\longrightarrow
\bigoplus\nolimits_{j = 1, \ldots, m} S^{-1}N
$$
which is the same as the one above.
\end{proof}


















\section{Tensor products}
\label{section-tensor-product}

\begin{definition}
\label{definition-bilinear}
Let $R$ be a ring, $M, N, P$ be three $R$-modules.
A mapping $f : M \times N \to P$ (where $M \times N$
is viewed only as Cartesian product of two $R$-modules) is said to be
{\it $R$-bilinear} if for each $x \in M$
the mapping $y\mapsto f(x, y)$ of $N$ into $P$ is $R$-linear, and for each
$y\in N$ the mapping $x\mapsto f(x, y)$ is also $R$-linear.
\end{definition}

\begin{lemma}
\label{lemma-tensor-product}
Let $M, N$ be $R$-modules. Then there exists a pair $(T, g)$
where $T$ is an $R$-module, and
$g : M \times N \to T$ an $R$-bilinear
mapping, with the following universal property:
For any $R$-module $P$ and any $R$-bilinear mapping
$f : M \times N \to P$, there
exists a unique $R$-linear
mapping $\tilde{f} : T \to P$ such that $f = \tilde{f} \circ g$.
In other words, the following diagram commutes:
$$
\xymatrix{
M \times N \ar[rr]^f \ar[dr]_g & & P\\
& T \ar[ur]_{f'}
}
$$
Moreover, if $(T, g)$ and $(T', g')$
are two pairs with this property, then there
exists a unique isomorphism
$j : T \to T'$ such that $j\circ g = g'$.
\end{lemma}

\noindent
The $R$-module $T$ which satisfies the above universal property is called
the  {\it tensor product} of $R$-modules $M$ and $N$, denoted as
$M \otimes_R N$.

\begin{proof}
We first prove the existence of such $R$-module $T$.
Let $M, N$ be $R$-modules.
Let $T$ be the quotient module
$P/Q$, where $P$ is the free $R$-module $R^{(M \times N)}$ and $Q$ is the
$R$-module generated by all elements of
the following types: ($x\in M, y\in N$)
\begin{align*}
(x + x', y) - (x, y) - (x', y), \\
(x, y + y') - (x, y) - (x, y'), \\
(ax, y) - a(x, y), \\
(x, ay) - a(x, y)
\end{align*}
Let $\pi : M \times N \to T$ denote the natural map.
This map is $R$-bilinear, as
implied by the above relations
when we check the bilinearity conditions. Denote the image
$\pi(x, y) = x \otimes
y$, then these elements generate
$T$. Now let $f : M \times N \to P$ be an $R$-bilinear map,
then we can define
$f' : T \to P$ by extending the mapping
$f'(x \otimes y) = f(x, y)$. Clearly $f = f'\circ \pi$. Moreover, $f'$ is
uniquely determined by the value on the
generating sets $\{x \otimes y : x\in M, y\in N\}$.
Suppose there is another pair $(T', g')$ satisfying the same properties.
Then there is a unique $j : T \to T'$ and
also $j' : T' \to T$ such that $g' = j\circ g$, $g = j'\circ g'$.
But then both the maps $(j\circ j') \circ g$ and $g$
satisfies the universal properties, so by uniqueness they are equal,
and hence $j'\circ j$ is identity on $T$.
Similarly $(j'\circ j) \circ g' = g'$ and $j\circ j'$ is identity on $T'$.
So $j$ is an isomorphism.
\end{proof}

\begin{lemma}
\label{lemma-flip-tensor-product}
Let $M, N, P$ be $R$-modules, then the bilinear maps
\begin{align*}
(x, y) & \mapsto y \otimes x\\
(x + y, z) & \mapsto x \otimes z + y \otimes z\\
(r, x) & \mapsto rx
\end{align*}
induce unique isomorphisms
\begin{align*}
M \otimes_R N & \to N \otimes_R M, \\
(M\oplus N)\otimes_R P & \to (M \otimes_R P)\oplus(N \otimes_R P),  \\
R \otimes_R M & \to M
\end{align*}
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\noindent
We may generalize the tensor product of two $R$-modules to finitely many
$R$-modules, and set up a
correspondence between the multi-tensor product with multilinear mappings.
Using almost the same construction
one can prove that:

\begin{lemma}
\label{lemma-multilinear}
Let $M_1, \ldots, M_r$ be $R$-modules. Then there exists a pair $(T, g)$
consisting of an $R$-module T and an $R$-multilinear mapping
$g : M_1\times \ldots \times M_r \to T$ with the universal
property: For any $R$-multilinear mapping
$f : M_1\times \ldots \times M_r \to P$ there exists a unique $R$-module
homomorphism $f' : T \to P$ such that $f'\circ g = f$.
Such a module $T$ is unique up to unique isomorphism. We denote it
$M_1\otimes_R \ldots \otimes_R M_r$ and we denote the universal
multilinear map $(m_1, \ldots, m_r) \mapsto m_1 \otimes \ldots \otimes m_r$.
\end{lemma}

\begin{proof}
Omitted.
\end{proof}

\begin{lemma}
\label{lemma-transitive}
The homomorphisms
$$
(M \otimes_R N)\otimes_R P \to
M \otimes_R N \otimes_R P \to
M \otimes_R (N \otimes_R P)
$$
such that
$f((x \otimes y)\otimes z) = x \otimes y \otimes z$
and $g(x \otimes y \otimes z) = x \otimes (y \otimes z)$,
$x\in M, y\in N, z\in P$ are well-defined and are isomorphisms.
\end{lemma}

\begin{proof}
We shall prove $f$ is well-defined and is an isomorphism, and this proof
carries analogously to $g$. Fix any
$z\in P$, then the mapping $(x, y)\mapsto x \otimes y \otimes z$,
$x\in M, y\in N$, is $R$-bilinear in $x$ and $y$,
and hence induces homomorphism $f_z : M \otimes N \to M \otimes N \otimes P$
which sends
$f_z(x \otimes y) = x \otimes y \otimes z$.
Then consider $(M \otimes N)\times P \to M \otimes N \otimes P$ given by
$(w, z)\mapsto f_z(w)$. The map is
$R$-bilinear and thus induces
$f : (M \otimes_R N)\otimes_R P \to M \otimes_R N \otimes_R P$
and $f((x \otimes y)\otimes z) = x \otimes y \otimes z$.
To construct the inverse, we note that the map
$\pi : M \times N \times P \to (M \otimes N)\otimes P$ is
$R$-trilinear.
Therefore, it induces an $R$-linear map
$h : M \otimes N \otimes P \to (M \otimes N)\otimes P$ which
agrees with the universal property. Here we see that
$h(x \otimes y \otimes z) = (x \otimes y)\otimes z$.
From the explicit expression of $f$ and $h$, $f\circ h$ and $h\circ f$ are
identity maps of $M \otimes N \otimes
P$ and $(M \otimes N)\otimes P$ respectively, hence $f$ is our desired
isomorphism.
\end{proof}

\noindent
Doing induction we see that this extends to multi-tensor products. Combined
with Lemma \ref{lemma-flip-tensor-product} we see that
the tensor product operation on the category of $R$-modules is associative,
commutative and distributive.

\begin{definition}
\label{definition-bimodule}
An abelian group $N$ is called an {\it $(A, B)$-bimodule} if it is both an
$A$-module and a $B$-module, and
the actions $A \to End(M)$ and $B \to End(M)$
are compatible in the sense that $(ax)b = a(xb)$ for all
$a\in A, b\in B, x\in N$. Usually we denote it as $_AN_B$.
\end{definition}

\begin{lemma}
\label{lemma-tensor-with-bimodule}
For $A$-module $M$, $B$-module $P$ and $(A, B)$-bimodule $N$, the modules
$(M \otimes_A N)\otimes_B P$ and $M \otimes_A(N \otimes_B P)$ can both be
given $(A, B)$-bimodule structure,
and moreover
$$
(M \otimes_A N)\otimes_B P \cong M \otimes_A(N \otimes_B P).
$$
\end{lemma}

\begin{proof}
A priori $M \otimes_A N$ is an $A$-module, but we can give it a
$B$-module structure by letting
$$
(x \otimes y)b = x \otimes yb, \quad x\in M, y\in N, b\in B
$$
Thus $M \otimes_A N$ becomes an $(A, B)$-bimodule. Similarly for
$N \otimes_B P$, and thus for
$(M \otimes_A N)\otimes_B P$ and $M \otimes_A(N \otimes_B P)$. By
Lemma \ref{lemma-transitive}, these two
modules are isomorphic as both as $A$-module and $B$-module via the same
mapping.
\end{proof}

\begin{lemma}
\label{lemma-hom-from-tensor-product}
For any three $R$-modules $M, N, P$,
$$
\Hom_R(M \otimes_R N, P) \cong \Hom_R(M, \Hom_R(N, P))
$$
\end{lemma}

\begin{proof}
An $R$-linear map $\hat{f}\in \Hom_R(M \otimes_R N, P)$ corresponds to an
$R$-bilinear map $f : M \times N \to P$. For
each $x\in M$ the mapping $y\mapsto f(x, y)$ is $R$-linear by the universal
property. Thus $f$ corresponds to a
map $\phi_f : M \to \Hom_R(N, P)$. This map is $R$-linear since
$$
\phi_f(ax + y)(z) =
f(ax + y, z) = af(x, z)+f(y, z) =
(a\phi_f(x)+\phi_f(y))(z),
$$
for all $a \in R$, $x \in M$, $y \in M$ and
$z \in N$. Conversely, any
$f \in \Hom_R(M, \Hom_R(N, P))$ defines an $R$-bilinear
map $M \times N \to P$, namely $(x, y)\mapsto f(x)(y)$.
So this is a natural one-to-one correspondence between the
two modules
$\Hom_R(M \otimes_R N, P)$ and $\Hom_R(M, \Hom_R(N, P))$.
\end{proof}

\begin{lemma}[Tensor products commute with colimits]
\label{lemma-tensor-products-commute-with-limits}
Let $(M_i, \mu_{ij})$ be a system over the partially ordered set $I$.
Let $N$ be an $R$-module. Then
$$
\colim (M_i \otimes N) \cong (\colim M_i)\otimes N.
$$
Moreover, the isomorphism is induced by the homomorphisms
$\mu_i \otimes 1: M_i \otimes N \to M \otimes N$
where $M = \colim_i M_i$ with natural maps $\mu_i : M_i \to M$.
\end{lemma}

\begin{proof}
First proof. The functor $M' \mapsto M' \otimes_R N$ is left adjoint
to the functor $N' \mapsto \Hom_R(N, N')$ by
Lemma \ref{lemma-hom-from-tensor-product}. Thus $M' \mapsto M' \otimes_R N$
commutes with all colimits, see
Categories, Lemma \ref{categories-lemma-adjoint-exact}.

\medskip\noindent
Second direct proof. Let $P = \colim (M_i \otimes N)$, $M = \colim M_i$.
Then for all $i\leq j$, the following diagram commutes:
$$
\xymatrix{
M_i \otimes N \ar[r]_{\mu_i \otimes 1} \ar[d]_{\mu_{ij} \otimes 1} &
M \otimes N \ar[d]^{\text{id}} \\
M_j \otimes N \ar[r]^{\mu_j \otimes 1} &
M \otimes N
}
$$
By Lemma \ref{lemma-homomorphism-limit},
these maps induce a unique homomorphism
$\psi : P \to M \otimes N$, with $\lambda_i : M_i \otimes N \to P$ given by
$\lambda_i = \pi \circ (\iota_i \otimes 1)$.

\medskip\noindent
To construct the inverse map, for each $i\in I$, there is the canonical
$R$-bilinear mapping $g_i : M_i \times N \to
M_i \otimes N$. This induces a unique mapping
$\widehat{\phi} : M \times N \to P$
such that $\widehat{\phi} \circ (\mu_i \times 1) = \lambda_i \circ g_i$.
It is $R$-bilinear. Thus it induces an
$R$-linear mapping $\phi : M \otimes N \to P$.
From the commutative diagram below:
$$
\xymatrix{
M_i \times N \ar[r]^{g_i} \ar[d]^{\mu_i \times \text{id}} &
M_i \otimes N\ar[r]_{\text{id}} \ar[d]_{\lambda_i} &
M_i \otimes N \ar[d]_{\mu_i \otimes \text{id}} \ar[rd]^{\lambda_i} \\
M \times N \ar[r]^{\widehat{\phi}} &
P \ar[r]^{\psi} & M \otimes N \ar[r]^{\phi} & P
}
$$
we see that $\psi\circ\widehat{\phi} = g$, the canonical $R$-bilinear mapping
$g : M \times N \to M \otimes N$. So
$\psi\circ\phi$ is identity on $M \otimes N$. From the right-hand square and
triangle, $\phi\circ\psi$ is also
identity on $P$.
\end{proof}

\begin{lemma}
\label{lemma-tensor-product-exact}
Let
\begin{align*}
M_1\xrightarrow{f} M_2\xrightarrow{g} M_3 \to 0
\end{align*}
be an exact sequence of $R$-modules and homomorphisms, and let $N$ be any
$R$-module. Then the sequence
\begin{equation}
\label{equation-2ndex}
M_1\otimes N\xrightarrow{f \otimes 1} M_2\otimes N \xrightarrow{g \otimes 1}
M_3\otimes N \to 0
\end{equation}
is exact. In other words, the functor $- \otimes_R N$ is
{\it right exact}, in the sense that tensoring
each term in the original right exact sequence preserves the exactness.
\end{lemma}

\begin{proof}
We apply the functor $\Hom(-, \Hom(N, P))$ to the first exact
sequence. We obtain
$$
0 \to
\Hom(M_3, \Hom(N, P)) \to
\Hom(M_2, \Hom(N, P)) \to
\Hom(M_1, \Hom(N, P))
$$
By Lemma \ref{lemma-hom-from-tensor-product}, we have
$$
0 \to \Hom(M_3 \otimes N, P) \to
\Hom(M_2 \otimes N, P) \to \Hom(M_1 \otimes N, P)
$$
Using the pullback property again, we arrive at the desired exact sequence.
\end{proof}

\begin{remark}
\label{remark-tensor-product-not-exact}
However, tensor product does NOT preserve exact sequences in general.
In other words, if $M_1 \to M_2 \to M_3$ is
exact, then it is not necessarily true that
$M_1 \otimes N \to M_2 \otimes N \to M_3 \otimes N$
is exact for arbitrary $R$-module $N$.
\end{remark}

\begin{example}
\label{example-tensor-product-not-exact}
Consider the injective map $2 : \mathbf{Z}\to \mathbf{Z}$
viewed as a map of $\mathbf{Z}$-modules.
Let $N = \mathbf{Z}/2$. Then the induced map
$\mathbf{Z} \otimes \mathbf{Z}/2 \to \mathbf{Z} \otimes \mathbf{Z}/2$
is NOT injective. This is because for
$x \otimes y\in \mathbf{Z} \otimes \mathbf{Z}/2$,
$$
(2 \otimes 1)(x \otimes y) = 2x \otimes y = x \otimes 2y = x \otimes 0 = 0
$$
Therefore the induced map is the zero map while $\mathbf{Z} \otimes N\neq 0$.
\end{example}

\begin{remark}
\label{remark-flat-module}
For $R$-modules $N$, if the
functor $-\otimes_R N$ is exact, i.e. tensoring
with $N$ preserves all exact
sequences, then $N$ is said to be {\it flat} $R$-module.
We will discuss this later in Section \ref{section-flat}.
\end{remark}

\begin{lemma}
\label{lemma-tensor-finiteness}
Let $R$ be a ring. Let $M$ and $N$ be $R$-modules.
\begin{enumerate}
\item If $N$ and $M$ are finite, then so is $M \otimes_R N$.
\item If $N$ and $M$ are finitely presented, then so is $M \otimes_R N$.
\end{enumerate}
\end{lemma}

\begin{proof}
Suppose $M$ is finite. Then choose a presentation
$0 \to K \to R^{\otimes n} \to M \to 0$. This gives an exact sequence
$K \otimes_R N \to N^{\oplus n} \to M \otimes_R N \to 0$ by
Lemma \ref{lemma-tensor-product-exact}.
We conclude that if $N$ is finite too then $M \otimes_R N$
is a quotient of a finite module, hence finite, see
Lemma \ref{lemma-extension}.
Similarly, if both $N$ and $M$ are finitely presented, then
we see that $K$ is finite and that $M \otimes_R N$
is a quotient of the finitely presented module $N^{\oplus n}$ by
a finite module, namely $K \otimes_R N$, and hence finitely presented, see
Lemma \ref{lemma-extension}.
\end{proof}

\begin{lemma}
\label{lemma-tensor-localization}
Let $M$ be an $R$-module. Then the $S^{-1}R$-modules $S^{-1}M$
and $S^{-1}R \otimes_R M$ are canonically isomorphic, and the
canonical isomorphism $f : S^{-1}R \otimes_R M \to S^{-1}M$
is given by
$$
f((a/s) \otimes m) = am/s, \forall a \in R, m \in M, s \in S
$$
\end{lemma}

\begin{proof}
Obviously, the map
$f' : S^{-1}R \times M \to S^{-1}M$ given by $f((a/s, m)) = am/s$ is
bilinear, and thus by the
universal property, this map induces a unique $S^{-1}R$-module homomorphism
$f : S^{-1}R \otimes_R M \to S^{-1}M$ as in the statement of the lemma.
Actually every element in $S^{-1}M$ is of the form $m/s$, $m\in M, s\in S$ and
every element in
$S^{-1}R \otimes_R M$ is of the form $1/s \otimes m$. To see the latter fact,
write an element in
$S^{-1}R \otimes_R M$ as
$$
\sum_k \frac{a_k}{s_k} \otimes m_k =
\sum_k \frac{a_k t_k}{s} \otimes m_k =
\frac{1}{s} \otimes \sum_k {a_k t_k}m_k = \frac{1}{s} \otimes m
$$
Where $m = \sum_k {a_k t_k}m_k$. Then it is obvious that $f$ is surjective,
and if $f(\frac{1}{s} \otimes m) = m/s = 0$ then there exists $t'\in S$ with
$tm = 0$ in $M$. Then we have
$$
\frac{1}{s} \otimes m = \frac{1}{st} \otimes tm = \frac{1}{st} \otimes 0 = 0
$$
Therefore $f$ is injective.
\end{proof}

\begin{lemma}
\label{lemma-tensor-product-localization}
Let $M, N$ be $R$-modules, then there is a canonical
$S^{-1}R$-module isomorphism
$f : S^{-1}M \otimes_{S^{-1}R}S^{-1}N \to S^{-1}(M \otimes_R N)$,
given by
$$
f((m/s)\otimes(n/t)) = (m \otimes n)/st
$$
\end{lemma}

\begin{proof}
We may use Lemma \ref{lemma-tensor-with-bimodule}
and Lemma \ref{lemma-tensor-localization} repeatedly to
see that these two
$S^{-1}R$-modules are isomorphic, noting that $S^{-1}R$ is an
$(R, S^{-1}R)$-bimodule:
\begin{align*}
S^{-1}(M \otimes_R N) & \cong S^{-1}R \otimes_R (M \otimes_R N)\\
 & \cong S^{-1}M \otimes_R N\\
 & \cong (S^{-1}M \otimes_{S^{-1}R}S^{-1}R)\otimes_R N\\
 & \cong S^{-1}M \otimes_{S^{-1}R}(S^{-1}R \otimes_R N)\\
 & \cong S^{-1}M \otimes_{S^{-1}R}S^{-1}N
\end{align*}
This isomorphism is easily seen to be the one stated in the lemma.
\end{proof}















\section{Tensor algebra}
\label{section-tensor-algebra}

\noindent
Let $R$ be a ring. Let $M$ be an $R$-module.
We define the {\it tensor algebra of $M$ over $R$} to
be the noncommutative $R$-algebra
$$
\text{T}(M) = \text{T}_R(M) =
\bigoplus\nolimits_{n \geq 0} \text{T}^n(M)
$$
with
$\text{T}^0(M) = R$,
$\text{T}^1(M) = M$,
$\text{T}^2(M) = M \otimes_R M$,
$\text{T}^3(M) = M \otimes_R M \otimes_R M$, and so on.
Multiplication is defined by the rule that on pure tensors we have
$$
(x_1 \otimes x_2 \otimes \ldots \otimes x_n)
\cdot
(y_1 \otimes y_2 \otimes \ldots \otimes y_m)
=
x_1 \otimes x_2 \otimes \ldots \otimes x_n \otimes
y_1 \otimes y_2 \otimes \ldots \otimes y_m
$$
and we extend this by linearity.

\medskip\noindent
We define the {\it exterior algebra $\wedge(M)$ of $M$ over $R$}
to be the quotient of $\text{T}(M)$ by the two sided
ideal generated by the elements $x \otimes x \in \text{T}^2(M)$.
The image of a pure tensor $x_1 \otimes \ldots \otimes x_n$
in $\wedge^n(M)$ is denoted $x_1 \wedge \ldots \wedge x_n$.
These elements generate $\wedge^n(M)$, they are $R$-linear
in each $x_i$ and they are zero when two of the $x_i$ ar